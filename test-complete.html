<!DOCTYPE html>
<html>
<head>
    <title>Test Image Access</title>
</head>
<body>
    <h1>Test Image Access - Koperasi Desa</h1>
    
    <h2>Test Image URLs:</h2>
    <div>
        <h3>1. New Path Structure (should work):</h3>
        <img src="http://localhost:8080/images/4495fca7-3b56-4b5e-b97f-8f1b0e7ecc07.png" alt="Test Image 1" style="max-width: 300px; border: 1px solid #ccc;">
        <p>URL: http://localhost:8080/images/4495fca7-3b56-4b5e-b97f-8f1b0e7ecc07.png</p>
        
        <h3>2. Other test images:</h3>
        <img src="http://localhost:8080/images/1ddbe7a9-6179-4315-886b-64afe6801dc8.png" alt="Test Image 2" style="max-width: 300px; border: 1px solid #ccc;">
        <p>URL: http://localhost:8080/images/1ddbe7a9-6179-4315-886b-64afe6801dc8.png</p>
        
        <h3>3. OLD Path (should NOT work):</h3>
        <img src="http://localhost:8080/api/images/4495fca7-3b56-4b5e-b97f-8f1b0e7ecc07.png" alt="Test Image 3 OLD" style="max-width: 300px; border: 1px solid #ccc;">
        <p>URL: http://localhost:8080/api/images/4495fca7-3b56-4b5e-b97f-8f1b0e7ecc07.png (SHOULD FAIL)</p>
    </div>
    
    <h2>Upload Test Form:</h2>
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" id="fileInput" accept="image/*">
        <button type="button" onclick="uploadImage()">Upload Test Image</button>
    </form>
    <div id="uploadResult"></div>
    
    <script>
        function uploadImage() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Please select a file');
                return;
            }
            
            const formData = new FormData();
            formData.append('file', file);
            
            fetch('http://localhost:8080/api/upload/image', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                const resultDiv = document.getElementById('uploadResult');
                if (data.success === 'true') {
                    resultDiv.innerHTML = `
                        <h3>Upload Success!</h3>
                        <p>File URL: ${data.url}</p>
                        <p>Filename: ${data.filename}</p>
                        <img src="http://localhost:8080${data.url}" alt="Uploaded Image" style="max-width: 300px; border: 1px solid green;">
                    `;
                } else {
                    resultDiv.innerHTML = `<p style="color: red;">Upload Failed: ${data.message}</p>`;
                }
            })
            .catch(error => {
                document.getElementById('uploadResult').innerHTML = `<p style="color: red;">Error: ${error}</p>`;
            });
        }
    </script>
</body>
</html>