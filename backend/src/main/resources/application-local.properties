# ===============================
# LOCAL DEVELOPMENT CONFIGURATION
# ===============================

# Optional secrets (never commit)
spring.config.import=optional:classpath:application-secrets.properties,optional:classpath:application-local-secrets.properties

# Server Configuration
server.port=8080

# Database Configuration for Local Development
# Option 1: MySQL with empty password (default XAMPP/WAMP)
spring.datasource.url=jdbc:mysql://localhost:3306/cemoca_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Jakarta&createDatabaseIfNotExist=true&autoReconnect=true&useUnicode=true&characterEncoding=UTF-8&allowMultiQueries=false
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# HikariCP Configuration for Local
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.read-only=false

# JPA/Hibernate Configuration for Local
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false

# Logging Configuration for Local Development
logging.level.com.shadcn.backend=INFO
logging.level.org.springframework.boot.autoconfigure=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.com.zaxxer.hikari=WARN
logging.pattern.console=%d{HH:mm:ss} %-5level %logger{20} - %msg%n

# File Logging Configuration
logging.file.path=C:/PROJEK/CEMOCAPPS/backend/logs
logging.file.name=C:/PROJEK/CEMOCAPPS/backend/logs/application/application.log
logging.file.scheduler=C:/PROJEK/CEMOCAPPS/backend/logs/scheduler/scheduler.log
logging.file.max-size=5MB
logging.file.max-history=5

# File Upload Configuration for Local
app.upload.dir=uploads
app.upload.document-dir=uploads/documents
app.upload.image-dir=uploads/images
app.upload.pdf-dir=uploads/pdfs

# Backend URL Configuration for Local
app.backend.url=http://localhost:8080

# HeyGen API Configuration for Local
# DO NOT REMOVE: required for HeyGen API auth
heygen.api.base-url=${HEYGEN_API_BASE_URL:https://api.heygen.com}
heygen.api.key=sk_V2_hgu_kYAp2K9dJ0B_gPkTzJgC8vQMNXTxlS8hGX9v6QvAhVBs
heygen.api.connect-timeout-ms=60000
heygen.api.ssl-handshake-timeout-ms=180000
heygen.api.timeout-seconds=180

# HeyGen Avatar Listing (default: only avatars created/owned by this account)
heygen.api.avatars.include-public=false
heygen.api.avatars.include-premium=false
heygen.api.avatars.use-groups=true
heygen.api.avatars.fallback-to-all-if-owned-empty=false
heygen.api.avatars.only-video-avatars=true
heygen.api.avatars.max-results=200



# Video cache backpressure for large batches (1000+ videos)
app.video.cache.queue-capacity=200
app.video.cache.lock-ttl-minutes=120
app.upload.max-file-size=100MB
app.upload.allowed-extensions=jpg,jpeg,png,gif,pdf,doc,docx,txt,csv,md,zip,rar,bmp

# HTTP Client Timeouts (required)
app.http.connect-timeout-ms=10000
app.http.read-timeout-ms=30000

# Image Upload Configuration for Local
app.image.max-size=10MB
app.video.max-size=100MB
app.upload.allowed-types=jpg,jpeg,png,gif,mp4,avi,mov,wmv,flv,webm

# Audio Upload Configuration for Local
app.audio.upload-dir=uploads/audio
app.audio.allowed-types=mp3,mp4

# Video Local Storage (required)
app.video.base-dir=C:/PROJEK/CEMOCAPPS/backend/storage/video
app.video.temp-dir=${app.video.base-dir}/temp
app.video.share-dir=${app.video.base-dir}/share
app.video.download.max-bytes=314572800
app.video.download.connect-timeout-seconds=30
app.video.download.read-timeout-seconds=300
app.video.cache.parallelism=4
app.video.cache.retention-days=30
app.video.cache.cleanup-cron=0 0 3 * * *

# Max audio boost for HeyGen MP4 cache
app.video.audio.boost-enabled=true
app.video.audio.filter=volume=12dB,loudnorm=I=-3:TP=-1.0:LRA=4,alimiter=limit=0.99
app.video.audio.bitrate=320k

# Force 9:16 mobile output size
app.video.output.width=720
app.video.output.height=1280

# Video Generation Tuning (required)
app.video.generation.parallelism=10
app.video.generation.batch-size=50
app.video.generation.batch-delay-ms=500

# WA Test Defaults (required)
app.wa.test.timeout-seconds=180
app.wa.test.poll-interval-seconds=5

# Wablas tracking/status sync
whatsapp.wablas.status-sync.enabled=true
whatsapp.wablas.tracking.enabled=true
whatsapp.wablas.tracking.secret=

# WA status sync tuning
app.wa.status-sync.max-items=200

# WA Retry (required)
app.wa.retry.delay-ms=2000

# WA Recovery Timeouts (required)
app.wa.processing-timeout-minutes=2
app.wa.pending-timeout-minutes=10

# Image Serving Configuration for Local
app.image.base-url=http://localhost:8080
app.image.serve-enabled=true

# Document Serving Configuration for Local
app.document.base-url=http://localhost:8080
app.document.serve-enabled=true

# CORS Configuration for Local (Allow all for development)
cors.allowed-origin-patterns=http://localhost:*,http://127.0.0.1:*
cors.allow-credentials=true

# Cache Configuration for Local
spring.cache.type=simple
spring.cache.cache-names=provinces,regencies,districts,villages
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=24h

# Wilayah API Configuration for Local
app.wilayah.api.base-url=https://wilayah.id/api
app.wilayah.api.timeout=15000
app.wilayah.api.cache-enabled=true

# Security Configuration for Local
app.security.jwt.secret=mySecretKeyForDevelopment2024
app.security.jwt.expiration=86400000

# Payment Configuration for Local
app.payment.prefix=PAY-
app.payment.id-length=8

# WhatsApp API Configuration for Local
# BACKUP (previous Wablas config)
# whatsapp.api.token=${WHATSAPP_API_TOKEN:oHDDXxRgr1XghtF9507vuf79HXFG22ReSBror2QgX2buGFKYNpfCBgY.shIPwVy1}
# whatsapp.api.sender=${WHATSAPP_API_SENDER:6285157661640}

whatsapp.api.url=${WHATSAPP_API_URL:https://tegal.wablas.com}
whatsapp.api.token=${WHATSAPP_API_TOKEN:oHDDXxRgr1XghtF9507vuf79HXFG22ReSBror2QgX2buGFKYNpfCBgY.shIPwVy1}
whatsapp.api.sender=${WHATSAPP_API_SENDER:6285157661640}
whatsapp.api.max-media-bytes=${WHATSAPP_API_MAX_MEDIA_BYTES:104857600}
whatsapp.wablas.max-media-bytes=${WHATSAPP_WABLAS_MAX_MEDIA_BYTES:16777216}
whatsapp.wablas.status-sync.enabled=${WHATSAPP_WABLAS_STATUS_SYNC_ENABLED:true}
whatsapp.wablas.bulk-enabled=false
whatsapp.api.enabled=true

# Development Debug Settings (minimal)
spring.jpa.properties.hibernate.generate_statistics=false

# Frontend URL Configuration for Local
app.frontend.url=http://localhost:3000
frontend.url=http://localhost:3000

# Master Data Configuration
master.data.agama.force-reinsert=false
master.data.spesialisasi.force-reinsert=false
master.data.posisi.force-reinsert=false
master.data.hobi.force-reinsert=false

# Image Service Configuration
app.image.serve-path=/api/images

# Birthday Notification Configuration for Local
birthday.notification.enabled=true
birthday.notification.time=0 0 7 * * *
birthday.notification.timezone=Asia/Jakarta
birthday.notification.message=Selamat ulang tahun! Semoga panjang umur, sehat selalu, dan sukses dalam karir. Salam hangat dari Alumni Association.
birthday.notification.days-ahead=0
birthday.notification.include-age=true

# Invitation System Configuration for Local
app.invitation.expiry-days=7

# Location Data Configuration for Local
location.data.force-reinsert=false

# Default Admin User Configuration for Local
app.admin.username=admin
app.admin.password=admin123
app.admin.email=muhammad.df@gmail.com
app.admin.fullname=Administrator Sistem
app.admin.phone=085352073620

# Additional Hibernate Configuration for Local
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
spring.jpa.defer-datasource-initialization=true

# Enhanced HikariCP Configuration for Local
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000

# Multipart Configuration for Local
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=150MB

# Security Configuration for Local (More permissive for development)
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=always
server.error.include-exception=true

# Actuator Configuration for Local (More open for development)
management.endpoints.web.exposure.include=health,info,metrics,env,beans
management.endpoint.health.show-details=always
management.endpoints.web.base-path=/actuator

# Midtrans Configuration for Local
midtrans.merchant.id=${MIDTRANS_MERCHANT_ID:YOUR_MERCHANT_ID}
midtrans.client.key=${MIDTRANS_CLIENT_KEY:YOUR_CLIENT_KEY}
midtrans.server.key=${MIDTRANS_SERVER_KEY:YOUR_SERVER_KEY}
midtrans.is.production=false
midtrans.api.url=https://api.sandbox.midtrans.com/v2
midtrans.snap.url=https://app.sandbox.midtrans.com/snap/v1/transactions

# Payment Verification Scheduler Configuration for Local
payment.verification.scheduler.enabled=true
payment.verification.scheduler.interval=300000
payment.verification.scheduler.initial-delay=60000
payment.verification.scheduler.max-age-hours=24

# Learning Schedule Scheduler Configuration for Local
learning.scheduler.enabled=true
learning.scheduler.poll-interval-ms=3600000
learning.scheduler.initial-delay-ms=60000
learning.scheduler.default-timezone=Asia/Jakarta

# Gemini Configuration (set via environment variables)
gemini.api.key=${GEMINI_API_KEY:AIzaSyCMb-wDgTI9ZeqiwmNoA_qtLTA1xZ_l5XA}
gemini.model=${GEMINI_MODEL:gemini-3}


